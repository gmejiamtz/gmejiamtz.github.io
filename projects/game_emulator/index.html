<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Game Emualator | Gary A. Mejia-Martinez </title> <meta name="author" content="Gary A. Mejia-Martinez"> <meta name="description" content="A console emulator created using C++ and SDL2"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://gmejiamtz.github.io/projects/game_emulator/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Gary </span> A.  Mejia-Martinez </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About Me </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/archive/home/">Archive </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Game Emualator</h1> <p class="post-description">A console emulator created using C++ and SDL2</p> </header> <article> <h2 id="overview">Overview</h2> <p>This is our report for the Banana Slug console emulator project for CSE 111, Advanced C++ Programming.</p> <h2 id="contributions">Contributions</h2> <p>This section will discuss each members’ contributions to the emulator.</p> <h3 id="summary">Summary</h3> <p>All our team did good work. In short, Duo Yu handled the memory class, controller input and gpu debugging. Larry Tran handled the emulator foundations when it was still called operating system, and debugged gpu color decoding. Tanvi Singh handled CPU function implementation and code refractoring. Gary Mejia handled Github maintaince and GPU foundations.</p> <h3 id="tanvi-singh">Tanvi Singh</h3> <p>Overall, I contributed to the CPU component of the final project and created the function implementations for each function, as well as the overall class implementation of the CPU. In order to simplify the retrieval of all of the components of instructions, I implemented a function that decoded each component. My decode function was significantly simplified when I figured out that all of the R-type instructions shared the same opcode value. This allowed me to simply check if the opcode of the given instruction was the R-type opcode value, and depending on the type I would assign the funct, reg_a, reg_b, reg_c, and immediate to the corresponding values within the instruction. If the value was not applicable, like for example the R-type does not have an immediate value, then the inapplicable value would be given a value of 0 since none of the values in the document use a value of 0. While I was checking if certain values of components of an instruction match up to the values of an instruction in the document I realized a lot of the values in the code are not understandable to someone who had never seen the code before. So, I utilized enums to create appropriate names for the opcode funct values, and decode values and made the code more readable to an external party. I originally did not code the store and load functions correctly, as nothing was actually getting stored and loaded into the memory. That is when I realized I had to utilize the memory write and read functions created by Duo in order to connect the CPU with the memory. That was one major bug I overcame since before that I was struggling to figure out how the CPU and memory connect to execute instructions. Some cool C++ topics I explored in this project were the concept of enums and shared pointers which greatly improved the readability of my code as well as the connectivity of my code with other components of the project.</p> <h3 id="duo-yu">Duo Yu</h3> <p>In this project, my primary contribution was the design and implementation of the memory management system. This included the development of the <code class="language-plaintext highlighter-rouge">Memory</code> class, which handles memory read and write operations, controller state updates, and permission checks for various memory regions. The key aspects of my work on the memory system are detailed below:</p> <ul> <li> <p><strong>Memory Initialization</strong></p> <ul> <li>Implemented the constructor of the <code class="language-plaintext highlighter-rouge">Memory</code> class to initialize memory from a given content source. This involves copying data into the memory space, starting from the designated address.</li> </ul> </li> <li> <p><strong>Memory Access and Permission Management</strong></p> <ul> <li>Developed the <code class="language-plaintext highlighter-rouge">read</code> and <code class="language-plaintext highlighter-rouge">write</code> methods to handle memory access. These methods include logic for checking permissions, ensuring that read, write, and execution permissions are respected based on predefined memory regions.</li> <li>Implemented permission checks in the <code class="language-plaintext highlighter-rouge">checkPermissions</code> method, ensuring that memory operations comply with specified access rights for different regions (e.g., RAM, stack, VRAM, and special I/O addresses).</li> </ul> </li> <li> <p><strong>Special I/O Handling</strong></p> <ul> <li>Integrated special I/O handling within the memory system, including reading controller data, handling standard input, and managing standard output and error streams.</li> <li>Implemented functionality to stop execution upon writing to a specific memory address designated for halting the system.</li> </ul> </li> <li> <p><strong>Controller State Management</strong></p> <ul> <li>Added functionality to update and read the controller state, allowing for interaction between the controller hardware and memory.</li> </ul> </li> </ul> <p>In addition to my primary responsibility for the memory system, I also provided significant support in debugging other critical components of the project. I assisted in identifying and resolving issues related to the GPU, ensuring proper graphical data management and optimizing GPU memory usage. I contributed to debugging CPU operations, ensuring correct and efficient instruction execution, and helped troubleshoot performance bottlenecks. Furthermore, I worked closely with the team to debug and enhance the operating system, focusing on memory management and I/O operations, which contributed to a more stable and reliable operating environment.</p> <h3 id="larry-tran">Larry Tran</h3> <p>I worked on the beginning of the emulator like the gpu and trying to understand how it was going to work and tried to do some debugging. Specifically, I helped with the setup function of the memory based on the rom file and the reset sequence before it got modified. I also answered questions on discord regarding the hello_world1.slug and hello_world2.slug files in terms of how it worked, like in what it was supposed to do and how it got to the outputs listed in the tests folder by decoding some of the binary in the rom files provided. One thing I did on the project that I am proud of is figuring out how to display the colors properly for the gpu. Initially the bug was displaying a black screen for the image slug file and I was able to find out what the problem was by reading the documentation since I wasn’t the one that wrote code so I had no idea what was happening. After looking at some examples on youtube of how to draw to the screen on SDL, I saw that the numbers being used were from 0 to 255 and that we were only using 0 to 3 as the values in SDL_SetRenderDrawColor which was why it was black since (0,0,0) is black. The document says that 0 to 3 value was how full the color values of red, green, and blue were, so the values for setting draw color were shifted left 6 since 255 is a 8-bit number. Also one of the colors kept getting 0 as the value and it turns out the way we were getting the 2-bits for that color was wrong, which was later fixed.</p> <h3 id="gary-mejia">Gary Mejia</h3> <p>Most of my contributions came in helping with overall debugging and Github tasks. To begin our project I created the base Dockerfile and .devcontainer.json to install all the required tools for our Codespaces. Any debugging of the Dockerfile was done reading the creation logs when building failed. For our CI/CD, I added an additional Github Actions job to run the first three hello world test roms before it was required. Additionally I modified the <code class="language-plaintext highlighter-rouge">run_test.sh</code> script when I finished the live controller remapping feature to pipe in keyboard input into the SDL window on the headless Github server. Debugging this had me use some ChatGPT prompts, echo statements, and several pushes.</p> <p>To debug the emulator itself Duo and I would have one version with print statements and I would go through the emulator with GDB. Due to the nature of the instructions, we were able to print out the encoded instructions in GDB with the <code class="language-plaintext highlighter-rouge">p/x</code> command. Additionally to see if our reset loop properly copied data I used conditional breakpoints in GDB. For example if I wanted to break at our memory’s <code class="language-plaintext highlighter-rouge">read</code> or <code class="language-plaintext highlighter-rouge">write</code> functions, I would set the breakpoint first, and then set the condition. If I wanted to break at the read function for the first three addresses, I would use the <code class="language-plaintext highlighter-rouge">condition</code> command. The command <code class="language-plaintext highlighter-rouge">condition 2 (address &lt;= 3 &amp;&amp; address &gt;= 0)</code> would only break at <code class="language-plaintext highlighter-rouge">read</code> if we read at address 0 to 3 and <code class="language-plaintext highlighter-rouge">read</code>’s breakpoint is number 2 in GDB. This would help to stop excessive breaking in the debugger on common functions.</p> <h2 id="design-choices">Design Choices</h2> <p>This section will discuss design choices made by us for certain components of the emulator.</p> <h3 id="encapsulation">Encapsulation</h3> <p>Most functions in components are private, good examples are the GPU and CPU. No CPU instruction is a public function, such is no GPU decoding function is public. This is done as we done believe that the emulator nor programmer should be able to call CPU or GPU instructions anywhere directly. If this happened the CPU could be forced to jump to a random address at the programmer’s behest. By restricting where these functions are called prevent us from making small but huge mistakes by called the wrong function. Another benefit is that it shortens the <code class="language-plaintext highlighter-rouge">game_loop</code> emulator function. Here is where both CPU and GPU instructions should be called. Our loop here resembles the standard five stage CPU pipeline by calling functions called <code class="language-plaintext highlighter-rouge">fetch</code>, <code class="language-plaintext highlighter-rouge">decode</code>, <code class="language-plaintext highlighter-rouge">execute</code> but omitting the <code class="language-plaintext highlighter-rouge">memory</code> and <code class="language-plaintext highlighter-rouge">writeback</code> stages due to this being software.</p> <p>While we do need to be able to force JAL instructions at will due to a spec requirement for the beginning of the calls to the <code class="language-plaintext highlighter-rouge">setup</code> and <code class="language-plaintext highlighter-rouge">loop</code> routines of the emulator, this is done by having <code class="language-plaintext highlighter-rouge">fetch</code> return the encoded instruction as a <code class="language-plaintext highlighter-rouge">uint32_t</code> and decode taking in a <code class="language-plaintext highlighter-rouge">uint32_t</code> as an argument. A programmer is allowed to place in any <code class="language-plaintext highlighter-rouge">uint32_t</code> value into decode but this requires them knowing the exact bits int instruction they want to accomplish an attack of value, else they just crash the emulator. This allows us to force instructions in a more roundabout way, which leads to less accidental mistakes.</p> <h3 id="cpu-and-gpu-connectivity">CPU and GPU Connectivity</h3> <p>To connect the CPU and GPU we decided for them to point to the same Memory. By having the same memory the CPU can fill in VRAM and the GPU can decode it for display. This is akin to hardware sharing a memory bus for communication. With C++ this design is accomplished easily with shared pointers.</p> <h2 id="extra-features">Extra Features</h2> <p>This section will discuss additional features of our project not specified within the spec.</p> <h3 id="github-codespaces">Github Codespaces</h3> <p>There are multiple ways to facilitate cross OS development in a team. At UCSC the most popular choice is to provide virtual machine images to unify student’s operating systems. For our introduction to systems programming course, CSE 130, often students are first tasked with setupping up their virtual machines prior to beginning the first assignment. The time to setup up a VM is rather small in the grad scheme of things but is annoying when dealing with different architectures, mainly ARM vs x86, and due to the process being akin to installing an OS from scratch it may be daunting to some less experienced studnets. Another choice is using Docker. This option is rather unpopular at UCSC, only commonly being used in our distriuted systems course, CSE 138, and most recently in our operating systems course, CSE 134. While the process different from creating a VM image and installing the OS, one may need to play around with Dockerfiles which can be scary and is akin to learning a small new language. While both options unify OS for students, they both require local installation of tools that are unlikely to be reused again. For this reason we opted to use Github Codespaces to unfiy our OS.</p> <p>What does Codespaces provided us that both VMs and Docker images don’t. Aside from the lack of local installation, the biggest benefit is working off the cloud. To work we simply need a WiFi connection. This allows us to install any tools we think may be necessary for the emulator and remove them or remake a new codespace without taking up space from our local harddrives. While Codespaces are essentially Docker images on the cloud and setup would require a Dockerfile, there are many templates our there for us to use. Lucky for use our use case only requires a small Dockerfile. Our Dockerfile can be found at <code class="language-plaintext highlighter-rouge">.devcontainer/Dockerfile</code>. All ours does is install a base Ubuntu image on this container with zsh as the shell along with all the tools and libraries we need to complete this project. The other nice part of Codespaces is the use of VSCode on the cloud. Literally no local tools are required to complete this project. Below is an image of Gary writing this part of the report in VSCode for the cloud on a created Codespace.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/codespaces-480.webp 480w,/assets/img/codespaces-800.webp 800w,/assets/img/codespaces-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/codespaces.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Codespaces in Action" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>What about the SDL windows? How do these even work if this is a Docker container NOT on your local machine. This is a good question, we must support a GUI somehow, it is the main spec of this project. For this problem I turned to this <a href="https://dev.to/konmaz/gui-in-github-codespaces-jl0" rel="external nofollow noopener" target="_blank">post</a> on dev.to by Konstantinos Mazgaltzidis on how to get a GUI on Github Codespaces. Another part of configuring a Codespace is a JSON file called devcontainer.json. This file resides along with the Dockerfile in a special directory named <code class="language-plaintext highlighter-rouge">.devcontainer</code>. Upon creating a codespace, Github will look in this directory for the devcontainer.json file to see if a Dockerfile is requested, what VSCode extensions to load into the browser version, and important for us what features to include. We want the Desktop-Lite feauture which will support a barebones desktop to run. Below is how we implement this into our Codespace.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"ghcr.io/devcontainers/features/desktop-lite:1"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="err">,</span><span class="w">
  </span><span class="nl">"forwardPorts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">6080</span><span class="p">]</span><span class="err">,</span><span class="w">
  </span><span class="nl">"portsAttributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"6080"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desktop"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre></div></div> <p>We forward port 6080 to display this desktop on a new tab or simple browser within VSCode itself. As shown below we are able to play Flappy Bird in our simple browser.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/flappy_bird-480.webp 480w,/assets/img/flappy_bird-800.webp 800w,/assets/img/flappy_bird-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/flappy_bird.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Codespaces Playing Flappy Bird" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>While this was not necessary for us to do, we thought it would be a nice thing to explore and play with. Skeptical at first but ending this project showed us that with Codespaces we may never need to install anything locally for most classes here at UCSC.</p> <h3 id="live-controller-remapping-and-github-actions-with-sdl">Live Controller Remapping and Github Actions with SDL</h3> <p>Another extra feature we implemented is live controller remapping. An option to change the controller layout is to change our <code class="language-plaintext highlighter-rouge">unordermap</code> in our <code class="language-plaintext highlighter-rouge">game_loop</code> function but this would require recompiling the project. We think live controller remapping is a better option simply to do not needing to recompile every time. To remap thr controller layout the emulator must launch the <code class="language-plaintext highlighter-rouge">game_loop</code> function. Remapping occurs before the emulator enters the infinite while loop of the actual game loop. Players are displayed their default controller layout, which supports one handed play on the right hand: WASD for up, down, left, and right, ‘Q’ for A, ‘E’ for B, ‘1’ for Start, and ‘3’ for Select. This may be akward for some plays and awful for left handed people. Thus to proceed to the actual game loop, the user must press their button for Start. To change their layout the player must press Select. Upon pressing Select they will be prompted with which button to remap, if they want to change our default button A to the key of ‘F’ they must press ‘Q’ then ‘F’. After this they will be reprompted to press Start to continue or Select to change another button.</p> <p>How do these remappings occur? Due to our original unordered map mapping SDL_Scancodes to ControllerButton enum values, we must poll SDL events. We have another SDL event polling loop dedicated to button presses and processing them for remapping. Our event loop itself is inside a while loop that is true until the scancode mapped to Start has been pressed, this required a function to search our scancodes to controller enum map inversely. If Select is pressed we enter a another part of the loop processes 2 button presses, the first to find which controller button to change and the second the key to map to. If a new key is selected the old mapped pair is erased from the map and the new pair is inserted. If a key that is already mapped to another button is pressed, then the mappings are swapped. To see an expected example see the <code class="language-plaintext highlighter-rouge">1.out</code> files in <code class="language-plaintext highlighter-rouge">tests/new_button_mappings</code> and <code class="language-plaintext highlighter-rouge">tests/swap_button_mappings</code>.</p> <p>A complementary extra feature alongside live button remapping is the corresponding Github Actions jobs to run regression tests. A required spec in this project is to have a job that at the bare minumum runs all three tests for check off of the project. We had this done at check off 1, but now since the user themself must input a key to enter the game loop, our regression test job had to change somehow. If we left it as is, we would fail due to timeouts and possibly lose up 1450 minutes of Github Action minutes without a timeout value set. Even that value we would be missing an important required spec for the project. We tried using GPT for this part too, however it generated new scripts which ended up being complex and not even work due to not many people doing similar tasks. The final solution ended up using a tool to fake keyboard input called <code class="language-plaintext highlighter-rouge">xdotool</code>. Our problem was to somehow send keyboard inputs to a window in a headless environment. <code class="language-plaintext highlighter-rouge">xdotool</code> allows you to focus on windows by searching for them. In our case we decided to search by PID as it is easy to store the PID via bash script then focus on the window by the number returned to by the <code class="language-plaintext highlighter-rouge">xdotool</code> search. Once this is done, we needed some made up input. By default all test directories for check off 1 had input files for stdin, thus we created similar files called <code class="language-plaintext highlighter-rouge">sdl_input.txt</code>. These contain character sequences players press. After the window is focused we loop through this file by character and send it to the window until the file inputs the final Start key input to enter the game loop to which the process exits. Due to all of this process being easily scriptable meant we only need to modify our <code class="language-plaintext highlighter-rouge">run_test.sh</code> to do these extra tasks and edit the provied <code class="language-plaintext highlighter-rouge">1.out</code> files to match our new prompts.</p> </article> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Gary A. Mejia-Martinez. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>